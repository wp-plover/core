(()=>{"use strict";var e,t={282:(e,t,n)=>{const o=window.React,r=window.wp.hooks,i=window.wp.compose,l=window.wp.data,a=window.wp.blocks,c=window.wp.domReady;var s=n.n(c);const u=window.wp.i18n;function p(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=p(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}const g=function(){for(var e,t,n=0,o="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=p(e))&&(o&&(o+=" "),o+=t);return o},m=window.plover.utils,v=window.plover.icons,d=window.wp.blockEditor,b=window.wp.components,_=window.wp.element,S=window.plover.components;function h(e,t){return"number"==typeof e||"number"==typeof t?Number(e)===Number(t):e===t}const w=5;function E({current:e,icons:t,onChange:n}){const[r,i]=(0,_.useState)(""),l=t.filter((({tags:e,slug:t,name:n})=>""===r.trim()||((null!=e?e:[]).join("")+t+n).toLowerCase().includes(r.trim().toLowerCase())));return(0,o.createElement)(b.__experimentalDropdownContentWrapper,{paddingSize:"none",className:"plover-icon-settings-panel__popover-content"},(0,o.createElement)(b.__experimentalVStack,{spacing:"12px"},(0,o.createElement)(b.TextControl,{label:(0,u.__)("Filter","plover"),value:r,onChange:i}),(0,o.createElement)("div",{className:"plover-icon-settings-panel__icon-list",style:{width:"300px",height:"240px"}},(0,o.createElement)(S.AutoSizer,null,(({width:t,height:r})=>{const i=Math.floor((t-16)/w),a=i,c=i;return(0,o.createElement)(S.FixedSizeGrid,{itemData:l,columnCount:w,columnWidth:a,rowCount:Math.ceil(l.length/w),rowHeight:c,height:r,width:t},(({columnIndex:t,rowIndex:r,style:i})=>{const a=l[w*r+t];return a?(0,o.createElement)("div",{style:i,className:"plover-icon-settings-panel__icon-preview-wrap"},(0,o.createElement)("button",{"aria-label":a.name,className:g({"plover-icon-settings-panel__icon-preview":!0,active:h(e,a.slug)}),dangerouslySetInnerHTML:{__html:a.svg},onClick:()=>{n({icon:String(a.slug),svg:a.svg})}})):null}))}))),l.length<=0&&(0,o.createElement)("p",{className:"plover-icon-settings-panel__no-result"},(0,u.__)("No icons","plover"))))}function f({attributes:e,setAttributes:t}){var n,r;const{iconSlug:i,iconSvgString:a,iconLibrary:c}=e,[s,p]=(0,_.useState)(!1),[g,v]=(0,_.useState)([]),d=(0,m.getExtensionSetting)("icon","libraries",{}),w=null!==(n=d.find((({slug:e})=>h(e,c))))&&void 0!==n?n:{},f=g.find((({slug:e})=>h(e,i)));return(0,_.useEffect)((()=>{w?.slug&&"none"!==w?.slug?(p(!0),(0,l.resolveSelect)("plover/icons").getIcons(w?.slug).then((({library:e,icons:t})=>{h(e,c)&&v(null!=t?t:[])})).finally((()=>{p(!1)}))):v([])}),[c]),(0,o.createElement)(o.Fragment,null,(0,o.createElement)(b.SelectControl,{label:(0,u.__)("Icon library","plover"),value:null!==(r=w?.slug)&&void 0!==r?r:"none",options:[{label:"None",value:"none"},...d.map((({name:e,slug:t})=>({label:e,value:t})))],onChange:e=>{t({iconLibrary:"none"===e?null:e,iconSlug:null,iconSvgString:null})}}),(0,o.createElement)(b.BaseControl,{label:(0,u.__)("Select icon","plover")},s?(0,o.createElement)("div",null,(0,o.createElement)(b.Spinner,null)):(0,o.createElement)(S.Popover,{className:"plover-icon-settings-panel__icon-picker",toggle:{icon:w?.slug?a:"",label:w?.name?w?.name+" / "+(f?(0,m.titleCase)(f?.name):(0,u.__)("None","plover")):(0,u.__)("None","plover")},renderContent:()=>(0,o.createElement)(E,{current:i,icons:g,onChange:({icon:e,svg:n})=>{t({iconSlug:e,iconSvgString:n})}})})))}function y({attributes:e,setAttributes:t,position:n=!0}){return(0,o.createElement)(d.InspectorControls,null,(0,o.createElement)(b.PanelBody,{title:(0,u.__)("Icon","plover"),className:"block-editor-plover-inspector__icons"},(0,o.createElement)(f,{attributes:e,setAttributes:t}),n&&(0,o.createElement)(b.__experimentalToggleGroupControl,{isBlock:!0,label:(0,u.__)("Icon position","plover"),value:e.iconPosition,onChange:e=>{t({iconPosition:e})}},(0,o.createElement)(b.__experimentalToggleGroupControlOption,{value:"left",label:(0,u.__)("Left","plover")}),(0,o.createElement)(b.__experimentalToggleGroupControlOption,{value:"right",label:(0,u.__)("Right","plover")})),(0,o.createElement)(S.UnitSlider,{label:(0,u.__)("Icon Size","plover"),value:e.iconSize,min:10,onChange:e=>{t({iconSize:e})}}),(0,o.createElement)(b.Button,{variant:"tertiary",onClick:()=>{t({iconLibrary:null,iconSlug:null,iconSvgString:null})}},(0,u.__)("Clear icon","plover"))))}function k(e){const{attributes:t,setAttributes:n,className:r,isSelected:i,isRTL:l}=e,{align:a,iconSize:c,iconSvgString:s}=t,u=(0,d.useBlockEditingMode)(),p=g(r,{[`has-text-align-${a}`]:a}),m=(0,d.useBlockProps)({className:p}),v=(0,o.createElement)(o.Fragment,null,"default"===u&&(0,o.createElement)(d.BlockControls,{group:"block"},(0,o.createElement)(d.AlignmentControl,{value:a,onChange:e=>n({align:e,dropCap:!1})})),(0,o.createElement)(y,{position:!1,...e,setAttributes:e=>{n(void 0===e?.iconSvgString?e:{...e,content:""})}}),(0,o.createElement)(y,{position:!1,...e}));let _=!1,S=!1;return"center"===a?(_=!0,S=!0):l?(_="left"===a,S="left"!==a):(S="right"===a,_="right"!==a),(0,o.createElement)(o.Fragment,null,v,(0,o.createElement)("div",{...m},(0,o.createElement)(b.ResizableBox,{enable:{bottom:!0,left:S,right:_,top:!1},lockAspectRatio:!0,showHandle:i,style:{display:"inline-block"},size:{width:c,height:c},onResizeStop:(e,t,o,r)=>{const i=parseInt(parseInt(c)+r.width,10)+"px";n({iconSize:i})}},(0,o.createElement)("span",{dangerouslySetInnerHTML:{__html:s}}))))}const C=window.plover.api,I={libraries:{}},x={fetchIconsFromAPI:e=>({type:"FETCH_ICONS_FROM_API",library:e}),setIcons:(e,{icons:t})=>({type:"SET_LIBRARY_ICONS",library:e,icons:t})},N={name:"plover/icons",options:{reducer:(e=I,t)=>("SET_LIBRARY_ICONS"===t.type&&(e={...e,libraries:{...e.libraries,[t.library]:t.icons}}),e),actions:x,selectors:{getIcons:(e,t)=>{var n;return{library:t,icons:null!==(n=e.libraries[t])&&void 0!==n?n:{}}}},controls:{FETCH_ICONS_FROM_API:({library:e})=>(0,C.fetchIcons)(e)},resolvers:{*getIcons(e){const t=yield x.fetchIconsFromAPI(e);return x.setIcons(e,t)}}}},O={iconLibrary:{type:"string"},iconSlug:{type:"string"},iconPosition:{type:"string",default:"right"},iconSize:{type:"string",default:"18px"},iconSvgString:{type:"string"}};(0,r.addFilter)("blocks.registerBlockType","plover/icon-attributes",((e,t)=>((0,m.getExtensionSetting)("icon","blocks",[]).includes(t)&&(e.attributes={...e.attributes,...(0,m.getExtensionSetting)("icon","attributes",O)}),e))),(0,r.addFilter)("editor.BlockEdit","plover/icon-controls",(e=>t=>{const{name:n,attributes:r}=t;return(0,m.getExtensionSetting)("icon","blocks",[]).includes(n)?"core/paragraph"===n?r?.className?.includes("is-style-icon")?(0,o.createElement)(k,{...t}):(0,o.createElement)(e,{...t}):(0,o.createElement)(o.Fragment,null,(0,o.createElement)(e,{...t}),(0,o.createElement)(y,{...t})):(0,o.createElement)(e,{...t})}),5),(0,r.addFilter)("editor.BlockListBlock","plover/with-icon-styles",(0,i.createHigherOrderComponent)((e=>t=>{const n=(0,m.getExtensionSetting)("icon","blocks",[]),{attributes:r,name:i,clientId:l}=t,a=(0,m.getExtensionSetting)("icon","libraries",{});if(!n.includes(i))return(0,o.createElement)(e,{...t});const c=g(t?.className,{"icon-library-not-available":!a.find((({slug:e})=>h(e,r?.iconLibrary))),[`has-icon__${r?.iconSlug}`]:r?.iconSlug,[`has-icon-position__${r?.iconPosition}`]:r?.iconPosition});let s="";return r?.iconSvgString&&(s+=`--wp--custom--icon--url: url('data:image/svg+xml;utf8,${r.iconSvgString}');`,r?.iconSize&&(s+=`--wp--custom--icon--size: ${r.iconSize};`)),(0,o.createElement)(o.Fragment,null,s&&(0,o.createElement)("style",null,"#block-"+l+"{"+s+"}"),(0,o.createElement)(e,{...t,className:c}))}),"withIcon")),s()((()=>{(0,a.getBlockVariations)("core/paragraph").some((e=>"plover-icon"===e.name))||(0,a.registerBlockVariation)("core/paragraph",{name:"plover-icon",title:(0,u.__)("Plover: Icon","plover"),icon:v.starOutline,description:(0,u.__)("Insert a SVG icon.","plover"),keywords:["icon","plover","svg"],attributes:{className:"is-style-icon",align:"center",iconLibrary:"plover-core",iconSlug:"star",iconSize:"24px",iconSvgString:'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon"><path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"></path></svg>',content:""},scope:["block","inserter","transform"],isActive:e=>e&&e?.className?.includes("is-style-icon")})})),l.register?(0,l.register)((0,l.createReduxStore)(N.name,N.options)):(0,l.registerStore)(N.name,N.options)}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,n,r,i)=>{if(!n){var l=1/0;for(u=0;u<e.length;u++){for(var[n,r,i]=e[u],a=!0,c=0;c<n.length;c++)(!1&i||l>=i)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(a=!1,i<l&&(l=i));if(a){e.splice(u--,1);var s=r();void 0!==s&&(t=s)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,r,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={829:0,138:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[l,a,c]=n,s=0;if(l.some((t=>0!==e[t]))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(c)var u=c(o)}for(t&&t(n);s<l.length;s++)i=l[s],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(u)},n=globalThis.webpackChunkplover_core=globalThis.webpackChunkplover_core||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[138],(()=>o(282)));r=o.O(r)})();