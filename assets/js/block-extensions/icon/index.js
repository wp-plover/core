(()=>{"use strict";var e,n={948:(e,n,t)=>{const o=window.React,r=window.wp.hooks,l=window.wp.compose;function i(e){var n,t,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(n=0;n<r;n++)e[n]&&(t=i(e[n]))&&(o&&(o+=" "),o+=t)}else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}const c=function(){for(var e,n,t=0,o="",r=arguments.length;t<r;t++)(e=arguments[t])&&(n=i(e))&&(o&&(o+=" "),o+=n);return o},a=window.plover.utils,s=window.wp.blockEditor,u=window.wp.components,p=window.wp.i18n,v=window.wp.element,g=window.plover.components,m=window.wp.apiFetch;var d=t.n(m);const _={icons:e=>function(e){const n="undefined"==typeof AbortController?void 0:new AbortController,t=d()({...e,signal:n?.signal});return t.cancel=()=>n?.abort(),t}({path:`/plover/v1/icons/${e}`,method:"GET"})};function b({current:e,icons:n,onChange:t}){const[r,l]=(0,v.useState)(""),i=Object.keys(n).filter((e=>{var t;return""===r.trim()||((null!==(t=n[e]?.t)&&void 0!==t?t:[]).join("|")+"|"+e).toLowerCase().includes(r.trim().toLowerCase())}));return(0,o.createElement)(u.__experimentalDropdownContentWrapper,{paddingSize:"none",className:"plover-icon-settings-panel__popover-content"},(0,o.createElement)(u.__experimentalVStack,{spacing:"12px"},(0,o.createElement)(u.TextControl,{label:(0,p.__)("Filter","plover"),value:r,onChange:l}),i.length?(0,o.createElement)("div",{className:"plover-icon-settings-panel__icon-list"},i.map(((r,l)=>(0,o.createElement)("button",{key:l,"aria-label":r,className:c({"plover-icon-settings-panel__icon-preview":!0,active:e===r}),dangerouslySetInnerHTML:{__html:n[r].s},onClick:()=>{t({icon:r,svg:n[r].s})}})))):(0,o.createElement)("p",{className:"plover-icon-settings-panel__no-result"},(0,p.__)("No icons","plover"))))}function f({attributes:e,setAttributes:n}){const{iconLibrary:t,iconSlug:r,iconSvgString:l}=e,[i,c]=(0,v.useState)(!1),[s,m]=(0,v.useState)(null),[d,f]=(0,v.useState)([]);return(0,v.useEffect)((()=>{if(!t||"none"===t)return void f([]);c(!0),s?.cancel();const e=_.icons(t);m(e),e.then((e=>{var n;f(null!==(n=e?.icons)&&void 0!==n?n:[])})).catch((()=>{f([])})).finally((()=>{c(!1)}))}),[t]),(0,o.createElement)(o.Fragment,null,(0,o.createElement)(u.SelectControl,{label:(0,p.__)("Icon library","plover"),value:null!=t?t:"none",options:[{label:"None",value:"none"},{label:"Plover",value:"plover"}],onChange:e=>{n({iconLibrary:"none"===e?null:e,iconSlug:null,iconSvgString:null})}}),(0,o.createElement)(u.BaseControl,{label:(0,p.__)("Select icon","plover")},i?(0,o.createElement)("div",null,(0,o.createElement)(u.Spinner,null)):(0,o.createElement)(g.Popover,{className:"plover-icon-settings-panel__icon-picker",toggle:{icon:l,label:(t?(0,a.titleCase)(t)+" / ":"")+(r?(0,a.titleCase)(r):(0,p.__)("None","none"))},renderContent:()=>(0,o.createElement)(b,{current:r,icons:d,onChange:({icon:e,svg:t})=>{n({iconSlug:e,iconSvgString:t})}})})))}function S({attributes:e,setAttributes:n}){return(0,o.createElement)(s.InspectorControls,null,(0,o.createElement)(u.PanelBody,{title:(0,p.__)("Icon","plover"),className:"block-editor-plover-inspector__icons"},(0,o.createElement)(f,{attributes:e,setAttributes:n}),(0,o.createElement)(u.__experimentalToggleGroupControl,{isBlock:!0,label:(0,p.__)("Icon position","plover"),value:e.iconPosition,onChange:e=>{n({iconPosition:e})}},(0,o.createElement)(u.__experimentalToggleGroupControlOption,{value:"left",label:(0,p.__)("Left","plover")}),(0,o.createElement)(u.__experimentalToggleGroupControlOption,{value:"right",label:(0,p.__)("Right","plover")})),(0,o.createElement)(g.UnitSlider,{label:(0,p.__)("Icon Size","plover"),value:e.iconSize,onChange:e=>{n({iconSize:e})}}),(0,o.createElement)(u.Button,{variant:"tertiary",onClick:()=>{n({iconLibrary:null,iconSlug:null,iconSvgString:null})}},(0,p.__)("Clear icon","plover"))))}const w={iconLibrary:{type:"string"},iconSlug:{type:"string"},iconPosition:{type:"string",default:"right"},iconSize:{type:"string",default:"18px"},iconSvgString:{type:"string"}};(0,r.addFilter)("blocks.registerBlockType","plover/icons-attributes",((e,n)=>((0,a.getExtensionSetting)("icon","blocks",[]).includes(n)&&(e.attributes={...e.attributes,...(0,a.getExtensionSetting)("icon","attributes",w)}),e))),(0,r.addFilter)("editor.BlockListBlock","plover/with-icon-styles",(0,l.createHigherOrderComponent)((e=>n=>{const{attributes:t,name:r,clientId:l}=n;if("core/button"!==r)return(0,o.createElement)(e,{...n});const i=c(n?.className,{[`has-icon__${t?.iconSlug}`]:t?.iconSlug,[`has-icon-position__${t?.iconPosition}`]:t?.iconPosition});let a="";return t?.iconSvgString&&(a+=`--wp--custom--icon--url: url('data:image/svg+xml;utf8,${t.iconSvgString}');`,t?.iconSize&&(a+=`--wp--custom--icon--size: ${t.iconSize};`)),(0,o.createElement)(o.Fragment,null,a&&(0,o.createElement)("style",null,"#block-"+l+"{"+a+"}"),(0,o.createElement)(e,{...n,className:i}))}),"withIcon")),(0,r.addFilter)("editor.BlockEdit","plover/icon-controls",(e=>n=>{const{name:t}=n;return"core/button"!==t?(0,o.createElement)(e,{...n}):(0,o.createElement)(o.Fragment,null,(0,o.createElement)(e,{...n}),(0,o.createElement)(S,{...n}))}))}},t={};function o(e){var r=t[e];if(void 0!==r)return r.exports;var l=t[e]={exports:{}};return n[e](l,l.exports,o),l.exports}o.m=n,e=[],o.O=(n,t,r,l)=>{if(!t){var i=1/0;for(u=0;u<e.length;u++){for(var[t,r,l]=e[u],c=!0,a=0;a<t.length;a++)(!1&l||i>=l)&&Object.keys(o.O).every((e=>o.O[e](t[a])))?t.splice(a--,1):(c=!1,l<i&&(i=l));if(c){e.splice(u--,1);var s=r();void 0!==s&&(n=s)}}return n}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[t,r,l]},o.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return o.d(n,{a:n}),n},o.d=(e,n)=>{for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={480:0,313:0};o.O.j=n=>0===e[n];var n=(n,t)=>{var r,l,[i,c,a]=t,s=0;if(i.some((n=>0!==e[n]))){for(r in c)o.o(c,r)&&(o.m[r]=c[r]);if(a)var u=a(o)}for(n&&n(t);s<i.length;s++)l=i[s],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(u)},t=globalThis.webpackChunkplover_core=globalThis.webpackChunkplover_core||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var r=o.O(void 0,[313],(()=>o(948)));r=o.O(r)})();