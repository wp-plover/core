(()=>{"use strict";const e=window.React,t=window.wp.hooks,l=window.plover.utils,n=window.wp.blockEditor,o=window.wp.element,i=window.wp.richText,r=({attributes:t})=>{const r=(0,o.useRef)(null),a=(0,n.useBlockProps)({className:{[`plover-prism prism-${t.theme}-theme`]:!0,[`language-${t.language}`]:!0}});return(0,o.useEffect)((()=>{r&&r.current&&window.Prism&&window.Prism.highlightElement(r.current,!1)}),[r,t?.content,t.theme]),(0,e.createElement)("pre",{...a},(0,e.createElement)("code",{ref:r},(0,l.isString)(t?.content)?(0,e.createElement)(o.RawHTML,null,t?.content):(0,i.getTextContent)(t?.content)))},a=window.wp.components,g=window.wp.i18n,h=({attributes:t,setAttributes:o})=>(0,e.createElement)(n.InspectorControls,null,(0,e.createElement)(a.PanelBody,null,(0,e.createElement)(a.__experimentalToggleGroupControl,{isBlock:!0,label:(0,g.__)("Style","plover"),value:t.highlight,onChange:e=>{o({highlight:e})}},(0,e.createElement)(a.__experimentalToggleGroupControlOption,{value:"highlight",label:(0,g.__)("Highlight","plover")}),(0,e.createElement)(a.__experimentalToggleGroupControlOption,{value:"none",label:(0,g.__)("None","plover")})),"highlight"===t.highlight&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.SelectControl,{label:(0,g.__)("Theme","plover"),value:t.theme,options:(0,l.getExtensionSetting)("highlight","support_themes",[]),onChange:e=>o({theme:e}),__nextHasNoMarginBottom:!0}),(0,e.createElement)(a.SelectControl,{label:(0,g.__)("Language","plover"),value:t.language,options:(0,l.getExtensionSetting)("highlight","support_languages",[]),onChange:e=>o({language:e}),__nextHasNoMarginBottom:!0})))),c={highlight:{type:"string",default:"highlight"},theme:{type:"string",default:"github-copilot"},language:{type:"string",default:"clike"}};(0,t.addFilter)("blocks.registerBlockType","plover/highlight-attributes",((e,t)=>("core/code"===t&&(e.attributes={...e.attributes,...(0,l.getExtensionSetting)("highlight","attributes",c)}),e))),(0,t.addFilter)("editor.BlockEdit","plover/highlight-controls",(t=>l=>{const{attributes:n,isSelected:o,name:i}=l;return"core/code"!==i?(0,e.createElement)(t,{...l}):(0,e.createElement)(e.Fragment,null,"none"===n.highlight?(0,e.createElement)(t,{...l}):o?(0,e.createElement)("div",{className:`prism-${n.theme}-theme`},(0,e.createElement)(t,{...l})):(0,e.createElement)(r,{...l}),(0,e.createElement)(h,{...l}))}))})();