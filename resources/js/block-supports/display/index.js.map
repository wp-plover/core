{"version":3,"file":"block-supports/display/index.js","mappings":"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","sources":["webpack://plover-core/./static/scripts/block-supports/display/DisplayPanel.jsx","webpack://plover-core/external window \"React\"","webpack://plover-core/external window [\"plover\",\"components\"]","webpack://plover-core/external window [\"plover\",\"data\"]","webpack://plover-core/external window [\"plover\",\"utils\"]","webpack://plover-core/external window [\"wp\",\"blockEditor\"]","webpack://plover-core/external window [\"wp\",\"components\"]","webpack://plover-core/external window [\"wp\",\"compose\"]","webpack://plover-core/external window [\"wp\",\"hooks\"]","webpack://plover-core/external window [\"wp\",\"i18n\"]","webpack://plover-core/webpack/bootstrap","webpack://plover-core/webpack/runtime/compat get default export","webpack://plover-core/webpack/runtime/define property getters","webpack://plover-core/webpack/runtime/hasOwnProperty shorthand","webpack://plover-core/webpack/runtime/make namespace object","webpack://plover-core/./static/scripts/block-supports/display/index.jsx"],"sourcesContent":["/**\n * WordPress dependencies.\n */\nimport { InspectorControls } from '@wordpress/block-editor';\nimport {\n  PanelBody,\n  SelectControl,\n  RangeControl,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Plover dependencies.\n */\nimport { getPloverSupport } from '@plover/utils';\nimport { ResponsiveControl, Tips } from '@plover/components';\n\nexport default function DisplayPanel ({ name, attributes, setAttributes }) {\n  const ploverDisplay = getPloverSupport(name, 'ploverDisplay');\n  // explicitly disable\n  if (ploverDisplay === false) {\n    return null;\n  }\n\n  const display = getPloverSupport(name, 'ploverDisplay')?.display;\n  const order = getPloverSupport(name, 'ploverDisplay')?.order;\n\n  // explicitly disable all props\n  if (display === false && order === false) {\n    return null;\n  }\n\n  return (\n    <InspectorControls>\n      <PanelBody title={__('Display', 'plover')} initialOpen={false}>\n        {display !== false && (\n          <ResponsiveControl\n            title={__('Display', 'plover')}\n            Component={SelectControl}\n            value={attributes.cssDisplay}\n            onChange={(value) => {\n              setAttributes({\n                cssDisplay: value,\n              });\n            }}\n            controlProps={{\n              options: [\n                { label: '', value: '' },\n                ...(\n                  display?.options || [\n                    { label: __('None', 'plover'), value: 'none' },\n                    { label: __('Block', 'plover'), value: 'block' },\n                    { label: __('Inline', 'plover'), value: 'inline' },\n                    { label: __('Inline Block', 'plover'), value: 'inline-block' },\n                    { label: __('Inline Flex', 'plover'), value: 'flex' },\n                  ]\n                )\n              ]\n            }}\n          />\n        )}\n\n        {order !== false && (\n          <ResponsiveControl\n            title={__('Order', 'plover')}\n            Component={RangeControl}\n            value={attributes.cssOrder}\n            sanitizer={(v) => v === '' ? v : Number(v)}\n            onChange={(value) => {\n              setAttributes({\n                cssOrder: value,\n              });\n            }}\n            controlProps={{\n              min: 0,\n              max: 10,\n              step: 1,\n            }}\n          />\n        )}\n\n        <Tips>\n          <a href=\"https://wpplover.com/docs/plover-kit/modules/css-display/\" target=\"_blank\">\n            {__('Documentation â†—', 'plover')}\n          </a>\n        </Tips>\n      </PanelBody>\n    </InspectorControls>\n  );\n}","module.exports = window[\"React\"];","module.exports = window[\"plover\"][\"components\"];","module.exports = window[\"plover\"][\"data\"];","module.exports = window[\"plover\"][\"utils\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"compose\"];","module.exports = window[\"wp\"][\"hooks\"];","module.exports = window[\"wp\"][\"i18n\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Plover dependencies\n */\nimport { getPloverSupport, getScalarValueByDevice } from '@plover/utils';\nimport { useDeviceType } from '@plover/data';\n\n/**\n * Internal dependencies.\n */\nimport DisplayPanel from './DisplayPanel';\n\naddFilter(\n  'blocks.registerBlockType',\n  'plover/display-attributes',\n  (settings, name) => {\n    const ploverDisplay = getPloverSupport(name, 'ploverDisplay');\n\n    if (ploverDisplay === false) {\n      return settings;\n    }\n\n    const displayAttributes = {};\n\n    if (ploverDisplay?.display !== false) {\n      displayAttributes['cssDisplay'] = {\n        type: 'object',\n      };\n    }\n\n    if (ploverDisplay?.order !== false) {\n      displayAttributes['cssOrder'] = {\n        type: 'object',\n      };\n    }\n\n    settings.attributes = {\n      ...settings.attributes,\n      ...displayAttributes,\n    };\n\n    return settings;\n  }\n);\n\naddFilter(\n  'editor.BlockListBlock',\n  'plover/with-block-display-css',\n  createHigherOrderComponent(\n    (BlockListBlock) => {\n      return (props) => {\n        const { name } = props;\n        const ploverDisplay = getPloverSupport(name, 'ploverDisplay');\n\n        const defaultReturn = <BlockListBlock {...props} />;\n\n        if (ploverDisplay === false) {\n          return defaultReturn;\n        }\n\n        const [deviceType] = useDeviceType();\n        const cssDisplay = getScalarValueByDevice(props?.attributes?.cssDisplay ?? '', deviceType);\n        const cssOrder = getScalarValueByDevice(props?.attributes?.cssOrder ?? '', deviceType);\n        const displayStyle = {};\n\n        if (cssDisplay) {\n          displayStyle['display'] = cssDisplay;\n        }\n        if (cssOrder !== '') {\n          displayStyle['order'] = Number(cssOrder);\n        }\n\n        props = {\n          ...props,\n          style: {\n            ...props.style ?? {},\n            ...displayStyle\n          },\n        };\n\n        const wrapperProps = {\n          ...props.wrapperProps,\n          style: {\n            ...props.wrapperProps?.style,\n            ...displayStyle\n          },\n        };\n\n        return <BlockListBlock {...props} wrapperProps={wrapperProps}/>;\n      };\n    },\n    'withBlockDisplayCss'\n  )\n);\n\naddFilter(\n  'editor.BlockEdit',\n  'plover/display-controls',\n  (BlockEdit) => {\n    return (props) => {\n      const { isSelected } = props;\n\n      return (\n        <>\n          <BlockEdit {...props} />\n          {isSelected && (\n            <DisplayPanel {...props}/>\n          )}\n        </>\n      );\n    };\n  },\n  99\n);\n"],"names":["InspectorControls","PanelBody","SelectControl","RangeControl","__","getPloverSupport","ResponsiveControl","Tips","DisplayPanel","name","attributes","setAttributes","ploverDisplay","display","order","createElement","title","initialOpen","Component","value","cssDisplay","onChange","controlProps","options","label","cssOrder","sanitizer","v","Number","min","max","step","href","target","addFilter","createHigherOrderComponent","getScalarValueByDevice","useDeviceType","settings","displayAttributes","type","BlockListBlock","props","_props$attributes$css","_props$attributes$css2","_props$style","defaultReturn","deviceType","displayStyle","style","wrapperProps","BlockEdit","isSelected","Fragment"],"sourceRoot":""}